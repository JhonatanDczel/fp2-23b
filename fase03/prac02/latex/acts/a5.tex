\section{Haciendo peticiones con multiples objetos}

\begin{itemize}
  \item Ahora creamos otra clase Test desde la que instanciaremos objetos Peticion que haran las peticiones a la base de datos
  \item Como es una implementación inicial, instanciaremos un nuevo objeto cada vez que querramos hacer una peticion
\end{itemize}

\begin{lstlisting}
  public class Test {
    public static void main(String[] args) throws SQLException, ClassNotFoundException {
        Peticion p0 = new Peticion();
        Peticion p1 = new Peticion();
        Peticion p2 = new Peticion();
        Peticion p3 = new Peticion();

      System.out.println(p0.hashCode() + "\n" + p1.hashCode() + "\n" + p2.hashCode() + "\n" + p3.hashCode());
    }
  }
\end{lstlisting}

\begin{itemize}
  \item Como se puede observar, crean 4 objetos Peticion que hacen las peticiones a la base de datos y muestran los resultados por consola
  \item Ademas imprimimos el hashcode de cada uno de los objetos
  \item Viendo el hashcode podemos deducir que todos estos objetos son distintos:
\end{itemize}

\begin{lstlisting}

    ...
    ...

    ID: 4, First Name: Rafael Last Name: Ortega
    ID: 5, First Name: Henry Last Name: Stevens
    ID: 6, First Name: Sharon Last Name: Jenkins
    ID: 7, First Name: Jorge Last Name: god

    ID: 1, First Name: James Last Name: Carter
    ID: 2, First Name: Helen Last Name: Leary
    ID: 3, First Name: Linda Last Name: Douglas
    ID: 4, First Name: Rafael Last Name: Ortega
    ID: 5, First Name: Henry Last Name: Stevens
    ID: 6, First Name: Sharon Last Name: Jenkins
    ID: 7, First Name: Jorge Last Name: god

    1684106402
    1204759365
    6952832174
    2048675102

\end{lstlisting}

\begin{itemize}
  \item Esto, aunque en primer momento parece lo mas facil e intuitivo de hacer, trae complicaciones cuando hacemos peticiones a grande escala
  \item Si tuvieramos que crear un objeto por cada peticion que hagamos y tuvieramos que hacer cientos de miles de peticiones resultaría ineficiente en espacio
  \item La solucion es usar un patrón de diseño bien conocido: el Singleton
\end{itemize}

